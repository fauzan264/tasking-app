{{ template "layout" . }}
{{ define "main" }}
    <div class="columns is-centered">
        <h1 class="title">{{ .content }}</h1>
    </div>
    <div class="columns mt-4 is-centered is-6">
        <div class="column is-6">
            <form id="form" method="post">
                <div class="field">
                    <label for="task" class="label">Task</label>
                    <div class="control">
                        <input type="text" id="task" class="input" name="task" placeholder="Input task">
                    </div>
                </div>
                <div class="field">
                    <label for="assign" class="label">Assign</label>
                    <div class="control">
                        <input type="text" id="assign" class="input" name="assign" placeholder="Input assigned to">
                    </div>
                </div>
                <div class="field">
                    <label for="deadline" class="label">Deadline</label>
                    <div class="control">
                        <input type="date" id="deadline" class="input" name="deadline">
                    </div>
                </div>
                <div class="field">
                    <div class="control">
                        <button type="submit" class="button is-small is-success is-fullwidth">Submit</button>
                    </div>
                </div>
            </form>
        </div>
	</div>
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const paramId = urlParams.get("id");

        if(paramId) {
            getData();
        }

        const form = document.getElementById("form");
        form.addEventListener("submit", function() {
            paramId ? update(paramId) : create();
        });
    </script>
{{ end }}